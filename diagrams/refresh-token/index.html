
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../user-login/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Refresh Token Flow - Auth Service Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Monaco:300,300i,400,400i,700,700i%7CMonaco:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Monaco";--md-code-font:"Monaco"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../../assets/mkdocs_puml/interaction.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#token-refresh-flow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Auth Service Docs" class="md-header__button md-logo" aria-label="Auth Service Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Auth Service Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Refresh Token Flow
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Auth Service Docs" class="md-nav__button md-logo" aria-label="Auth Service Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Auth Service Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Diagrams
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Diagrams
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Register Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Login Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Refresh Token Flow
    
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="token-refresh-flow">Token Refresh Flow</h1>
<p>This diagram shows the token refresh sequence:</p>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1576px" preserveAspectRatio="xMidYMid meet" style="width:1756px;height:1576px;background:#FFFFFF;" version="1.1" viewBox="0 0 1756 1576" width="1756px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="none" height="1292.9922" style="stroke:#000000;stroke-width:1.5;" width="1739.4185" x="10" y="185.6953"/><rect fill="none" height="1013.9922" style="stroke:#000000;stroke-width:1.5;" width="1719.4185" x="20" y="457.6953"/><rect fill="none" height="676.7266" style="stroke:#000000;stroke-width:1.5;" width="1699.4185" x="30" y="787.9609"/><g><title>Frontend</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="70.5547" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="74" x2="74" y1="81.2969" y2="1495.6875"/></g><g><title>AuthController</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="313.606" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="316.6133" x2="316.6133" y1="81.2969" y2="1495.6875"/></g><g><title>AuthService</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="648.1904" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="651.9136" x2="651.9136" y1="81.2969" y2="1495.6875"/></g><g><title>JwtService</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="910.0879" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="913.6831" x2="913.6831" y1="81.2969" y2="1495.6875"/></g><g><title>UserRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1023.9839" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1027.4927" x2="1027.4927" y1="81.2969" y2="1495.6875"/></g><g><title>RefreshTokenRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1187.2695" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1190.4751" x2="1190.4751" y1="81.2969" y2="1495.6875"/></g><g><title>Postgres DB</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1669.8306" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1673.2427" x2="1673.2427" y1="81.2969" y2="1495.6875"/></g><g class="participant participant-head" data-participant="FE"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="40" y="77.9951">Frontend</text><ellipse cx="74.5547" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M74.5547,21.5 L74.5547,48.5 M61.5547,29.5 L87.5547,29.5 M74.5547,48.5 L61.5547,63.5 M74.5547,48.5 L87.5547,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="FE"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="40" y="1507.6826">Frontend</text><ellipse cx="74.5547" cy="1519.4844" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M74.5547,1527.4844 L74.5547,1554.4844 M61.5547,1535.4844 L87.5547,1535.4844 M74.5547,1554.4844 L61.5547,1569.4844 M74.5547,1554.4844 L87.5547,1569.4844" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="AC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.9854" x="259.6133" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9854" x="266.6133" y="69.9951">AuthController</text></g><g class="participant participant-tail" data-participant="AC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.9854" x="259.6133" y="1494.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9854" x="266.6133" y="1514.6826">AuthController</text></g><g class="participant participant-head" data-participant="AS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.5537" x="602.9136" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="609.9136" y="69.9951">AuthService</text></g><g class="participant participant-tail" data-participant="AS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.5537" x="602.9136" y="1494.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="609.9136" y="1514.6826">AuthService</text></g><g class="participant participant-head" data-participant="JS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.8096" x="870.6831" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8096" x="877.6831" y="69.9951">JwtService</text></g><g class="participant participant-tail" data-participant="JS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.8096" x="870.6831" y="1494.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8096" x="877.6831" y="1514.6826">JwtService</text></g><g class="participant participant-head" data-participant="UR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9824" x="967.4927" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9824" x="974.4927" y="69.9951">UserRepository</text></g><g class="participant participant-tail" data-participant="UR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9824" x="967.4927" y="1494.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9824" x="974.4927" y="1514.6826">UserRepository</text></g><g class="participant participant-head" data-participant="RTR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185.5889" x="1098.4751" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.5889" x="1105.4751" y="69.9951">RefreshTokenRepository</text></g><g class="participant participant-tail" data-participant="RTR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185.5889" x="1098.4751" y="1494.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.5889" x="1105.4751" y="1514.6826">RefreshTokenRepository</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1758" x="1628.2427" y="77.9951">Postgres DB</text><path d="M1655.8306,29 C1655.8306,19 1673.8306,19 1673.8306,19 C1673.8306,19 1691.8306,19 1691.8306,29 L1691.8306,55 C1691.8306,65 1673.8306,65 1673.8306,65 C1673.8306,65 1655.8306,65 1655.8306,55 L1655.8306,29" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1655.8306,29 C1655.8306,39 1673.8306,39 1673.8306,39 C1673.8306,39 1691.8306,39 1691.8306,29" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1758" x="1628.2427" y="1507.6826">Postgres DB</text><path d="M1655.8306,1520.9844 C1655.8306,1510.9844 1673.8306,1510.9844 1673.8306,1510.9844 C1673.8306,1510.9844 1691.8306,1510.9844 1691.8306,1520.9844 L1691.8306,1546.9844 C1691.8306,1556.9844 1673.8306,1556.9844 1673.8306,1556.9844 C1673.8306,1556.9844 1655.8306,1556.9844 1655.8306,1546.9844 L1655.8306,1520.9844" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1655.8306,1520.9844 C1655.8306,1530.9844 1673.8306,1530.9844 1673.8306,1530.9844 C1673.8306,1530.9844 1691.8306,1530.9844 1691.8306,1520.9844" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-participant-1="FE" data-participant-2="AC"><polygon fill="#181818" points="305.606,108.4297,315.606,112.4297,305.606,116.4297,309.606,112.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="74.5547" x2="311.606" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.0513" x="81.5547" y="107.3638">POST /auth/refresh(refreshToken)</text></g><g class="message" data-participant-1="AC" data-participant-2="AS"><polygon fill="#181818" points="640.1904,137.5625,650.1904,141.5625,640.1904,145.5625,644.1904,141.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="317.606" x2="646.1904" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.3525" x="324.606" y="136.4966">refresh(refreshToken)</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#181818" points="902.0879,166.6953,912.0879,170.6953,902.0879,174.6953,906.0879,170.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="908.0879" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.8975" x="659.1904" y="165.6294">validateRefreshToken(refreshToken)</text></g><path d="M10,185.6953 L74.4429,185.6953 L74.4429,192.8281 L64.4429,202.8281 L10,202.8281 L10,185.6953" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1292.9922" style="stroke:#000000;stroke-width:1.5;" width="1739.4185" x="10" y="185.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="198.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90.9165" x="89.4429" y="197.9058">[token invalid]</text><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,219.9609,653.1904,223.9609,663.1904,227.9609,659.1904,223.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="223.9609" y2="223.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30.9258" x="669.1904" y="218.895">false</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#181818" points="328.606,249.0938,318.606,253.0938,328.606,257.0938,324.606,253.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="253.0938" y2="253.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="248.0278">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#181818" points="85.5547,278.2266,75.5547,282.2266,85.5547,286.2266,81.5547,282.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="282.2266" y2="282.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="277.1606">401 Unauthorized</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1749.4185" y1="291.2266" y2="291.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.3149" x="15" y="301.437">[token valid]</text><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,322.1641,653.1904,326.1641,663.1904,330.1641,659.1904,326.1641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="326.1641" y2="326.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.6792" x="669.1904" y="321.0981">true</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#181818" points="902.0879,351.2969,912.0879,355.2969,902.0879,359.2969,906.0879,355.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="908.0879" y1="355.2969" y2="355.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.2417" x="659.1904" y="350.231">getUserIdFromToken(refreshToken)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,380.4297,653.1904,384.4297,663.1904,388.4297,659.1904,384.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="384.4297" y2="384.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.4409" x="669.1904" y="379.3638">userId</text></g><g class="message" data-participant-1="AS" data-participant-2="UR"><polygon fill="#181818" points="1015.9839,409.5625,1025.9839,413.5625,1015.9839,417.5625,1019.9839,413.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="1021.9839" y1="413.5625" y2="413.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.9619" x="659.1904" y="408.4966">findById(userId)</text></g><g class="message" data-participant-1="UR" data-participant-2="DB"><polygon fill="#181818" points="1661.8306,438.6953,1671.8306,442.6953,1661.8306,446.6953,1665.8306,442.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1027.9839" x2="1667.8306" y1="442.6953" y2="442.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.9351" x="1034.9839" y="437.6294">SELECT * FROM users WHERE id=?</text></g><path d="M20,457.6953 L84.4429,457.6953 L84.4429,464.8281 L74.4429,474.8281 L20,474.8281 L20,457.6953" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1013.9922" style="stroke:#000000;stroke-width:1.5;" width="1719.4185" x="20" y="457.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="470.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101.5029" x="99.4429" y="469.9058">[user not found]</text><g class="message" data-participant-1="DB" data-participant-2="UR"><polygon fill="#181818" points="1038.9839,491.9609,1028.9839,495.9609,1038.9839,499.9609,1034.9839,495.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1032.9839" x2="1672.8306" y1="495.9609" y2="495.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="1044.9839" y="490.895">null</text></g><g class="message" data-participant-1="UR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,521.0938,653.1904,525.0938,663.1904,529.0938,659.1904,525.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1026.9839" y1="525.0938" y2="525.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="669.1904" y="520.0278">null</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#181818" points="328.606,550.2266,318.606,554.2266,328.606,558.2266,324.606,554.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="554.2266" y2="554.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="549.1606">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#181818" points="85.5547,579.3594,75.5547,583.3594,85.5547,587.3594,81.5547,583.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="583.3594" y2="583.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="578.2935">401 Unauthorized</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="1739.4185" y1="592.3594" y2="592.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.0269" x="25" y="602.5698">[user found]</text><g class="message" data-participant-1="DB" data-participant-2="UR"><polygon fill="#181818" points="1038.9839,623.2969,1028.9839,627.2969,1038.9839,631.2969,1034.9839,627.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1032.9839" x2="1672.8306" y1="627.2969" y2="627.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.355" x="1044.9839" y="622.231">user</text></g><g class="message" data-participant-1="UR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,652.4297,653.1904,656.4297,663.1904,660.4297,659.1904,656.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1026.9839" y1="656.4297" y2="656.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.355" x="669.1904" y="651.3638">user</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#181818" points="902.0879,681.5625,912.0879,685.5625,902.0879,689.5625,906.0879,685.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="908.0879" y1="685.5625" y2="685.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9561" x="659.1904" y="680.4966">hashToken(refreshToken)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,710.6953,653.1904,714.6953,663.1904,718.6953,659.1904,714.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="714.6953" y2="714.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="669.1904" y="709.6294">hashedRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#181818" points="1179.2695,739.8281,1189.2695,743.8281,1179.2695,747.8281,1183.2695,743.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="743.8281" y2="743.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396.9063" x="659.1904" y="738.7622">findByUserIdAndHashedToken(user.id, hashedRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#181818" points="1661.8306,768.9609,1671.8306,772.9609,1661.8306,776.9609,1665.8306,772.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="772.9609" y2="772.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="458.561" x="1198.2695" y="767.895">SELECT * FROM refresh_tokens WHERE userId=? AND hashedToken=?</text></g><path d="M30,787.9609 L94.4429,787.9609 L94.4429,795.0938 L84.4429,805.0938 L30,805.0938 L30,787.9609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="676.7266" style="stroke:#000000;stroke-width:1.5;" width="1699.4185" x="30" y="787.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="801.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.4258" x="109.4429" y="800.1714">[refresh token not found]</text><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#181818" points="1202.2695,822.2266,1192.2695,826.2266,1202.2695,830.2266,1198.2695,826.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="826.2266" y2="826.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="1208.2695" y="821.1606">null</text></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,851.3594,653.1904,855.3594,663.1904,859.3594,659.1904,855.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="855.3594" y2="855.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="669.1904" y="850.2935">null</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#181818" points="328.606,880.4922,318.606,884.4922,328.606,888.4922,324.606,884.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="884.4922" y2="884.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="879.4263">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#181818" points="85.5547,909.625,75.5547,913.625,85.5547,917.625,81.5547,913.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="913.625" y2="913.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="908.5591">401 Unauthorized</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="1729.4185" y1="922.625" y2="922.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.9497" x="35" y="932.8354">[refresh token found]</text><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#181818" points="1202.2695,953.5625,1192.2695,957.5625,1202.2695,961.5625,1198.2695,957.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="957.5625" y2="957.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="1208.2695" y="952.4966">hashedRefreshToken</text></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,982.6953,653.1904,986.6953,663.1904,990.6953,659.1904,986.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="986.6953" y2="986.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="669.1904" y="981.6294">hashedRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#181818" points="1179.2695,1011.8281,1189.2695,1015.8281,1179.2695,1019.8281,1183.2695,1015.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="1015.8281" y2="1015.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="413.1816" x="659.1904" y="1010.7622">deleteByUserIdAndHashedToken(user.id, hashedRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#181818" points="1661.8306,1040.9609,1671.8306,1044.9609,1661.8306,1048.9609,1665.8306,1044.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="1044.9609" y2="1044.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="448.8237" x="1198.2695" y="1039.895">DELETE FROM refresh_tokens WHERE userId=? AND hashedToken=?</text></g><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#181818" points="1202.2695,1054.9609,1192.2695,1058.9609,1202.2695,1062.9609,1198.2695,1058.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="1058.9609" y2="1058.9609"/></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,1068.9609,653.1904,1072.9609,663.1904,1076.9609,659.1904,1072.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="1072.9609" y2="1072.9609"/></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#181818" points="902.0879,1098.0938,912.0879,1102.0938,902.0879,1106.0938,906.0879,1102.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="908.0879" y1="1102.0938" y2="1102.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.8701" x="659.1904" y="1097.0278">generateAccessToken(userId)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,1127.2266,653.1904,1131.2266,663.1904,1135.2266,659.1904,1131.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="1131.2266" y2="1131.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2617" x="669.1904" y="1126.1606">newAccessToken</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#181818" points="902.0879,1156.3594,912.0879,1160.3594,902.0879,1164.3594,906.0879,1160.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="908.0879" y1="1160.3594" y2="1160.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.1006" x="659.1904" y="1155.2935">generateRefreshToken(userId)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#181818" points="663.1904,1185.4922,653.1904,1189.4922,663.1904,1193.4922,659.1904,1189.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="1189.4922" y2="1189.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.4922" x="669.1904" y="1184.4263">newRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="AS"><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="694.1904" y1="1218.625" y2="1218.625"/><line style="stroke:#181818;stroke-width:1;" x1="694.1904" x2="694.1904" y1="1218.625" y2="1231.625"/><line style="stroke:#181818;stroke-width:1;" x1="653.1904" x2="694.1904" y1="1231.625" y2="1231.625"/><polygon fill="#181818" points="663.1904,1227.625,653.1904,1231.625,663.1904,1235.625,659.1904,1231.625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.5137" x="659.1904" y="1213.5591">hashToken(newRefreshToken)</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#181818" points="1179.2695,1256.7578,1189.2695,1260.7578,1179.2695,1264.7578,1183.2695,1260.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="1260.7578" y2="1260.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.6353" x="659.1904" y="1255.6919">save(user.id, hashedNewRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#181818" points="1661.8306,1285.8906,1671.8306,1289.8906,1661.8306,1293.8906,1665.8306,1289.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="1289.8906" y2="1289.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.8989" x="1198.2695" y="1284.8247">INSERT INTO refresh_tokens(...)</text></g><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#181818" points="1202.2695,1299.8906,1192.2695,1303.8906,1202.2695,1307.8906,1198.2695,1303.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="1303.8906" y2="1303.8906"/></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#181818" points="663.1904,1313.8906,653.1904,1317.8906,663.1904,1321.8906,659.1904,1317.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="1317.8906" y2="1317.8906"/></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#181818" points="328.606,1343.0234,318.606,1347.0234,328.606,1351.0234,324.606,1347.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="1347.0234" y2="1347.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310.5845" x="334.606" y="1341.9575">TokenPair(newAccessToken, newRefreshToken)</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#181818" points="85.5547,1372.1563,75.5547,1376.1563,85.5547,1380.1563,81.5547,1376.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="1376.1563" y2="1376.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="91.5547" y="1371.0903">200 OK</text></g><path d="M79,1389.1563 L79,1459.1563 L311,1459.1563 L311,1399.1563 L301,1389.1563 L79,1389.1563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M301,1389.1563 L301,1399.1563 L311,1399.1563 L301,1389.1563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="85" y="1406.2231">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.1187" x="93.2646" y="1421.356">&quot;accessToken&quot;: &quot;eyJhbGciOi...&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.4556" x="93.2646" y="1436.4888">&quot;refreshToken&quot;: &quot;eyJhbGciOi...&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="85" y="1451.6216">}</text></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1576px" preserveAspectRatio="xMidYMid meet" style="width:1756px;height:1576px;background:#1B1B1B;" version="1.1" viewBox="0 0 1756 1576" width="1756px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="1576" style="stroke:none;stroke-width:1;" width="1756" x="0" y="0"/><rect fill="none" height="1292.9922" style="stroke:#FFFFFF;stroke-width:1.5;" width="1739.4185" x="10" y="185.6953"/><rect fill="none" height="1013.9922" style="stroke:#FFFFFF;stroke-width:1.5;" width="1719.4185" x="20" y="457.6953"/><rect fill="none" height="676.7266" style="stroke:#FFFFFF;stroke-width:1.5;" width="1699.4185" x="30" y="787.9609"/><g><title>Frontend</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="70.5547" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="74" x2="74" y1="81.2969" y2="1495.6875"/></g><g><title>AuthController</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="313.606" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="316.6133" x2="316.6133" y1="81.2969" y2="1495.6875"/></g><g><title>AuthService</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="648.1904" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="651.9136" x2="651.9136" y1="81.2969" y2="1495.6875"/></g><g><title>JwtService</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="910.0879" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="913.6831" x2="913.6831" y1="81.2969" y2="1495.6875"/></g><g><title>UserRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1023.9839" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1027.4927" x2="1027.4927" y1="81.2969" y2="1495.6875"/></g><g><title>RefreshTokenRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1187.2695" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1190.4751" x2="1190.4751" y1="81.2969" y2="1495.6875"/></g><g><title>Postgres DB</title><rect fill="#000000" fill-opacity="0.00000" height="1414.3906" width="8" x="1669.8306" y="81.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1673.2427" x2="1673.2427" y1="81.2969" y2="1495.6875"/></g><g class="participant participant-head" data-participant="FE"><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="40" y="77.9951">Frontend</text><ellipse cx="74.5547" cy="13.5" fill="#222222" rx="8" ry="8" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M74.5547,21.5 L74.5547,48.5 M61.5547,29.5 L87.5547,29.5 M74.5547,48.5 L61.5547,63.5 M74.5547,48.5 L87.5547,63.5" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="FE"><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="40" y="1507.6826">Frontend</text><ellipse cx="74.5547" cy="1519.4844" fill="#222222" rx="8" ry="8" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M74.5547,1527.4844 L74.5547,1554.4844 M61.5547,1535.4844 L87.5547,1535.4844 M74.5547,1554.4844 L61.5547,1569.4844 M74.5547,1554.4844 L87.5547,1569.4844" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="AC"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="115.9854" x="259.6133" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9854" x="266.6133" y="69.9951">AuthController</text></g><g class="participant participant-tail" data-participant="AC"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="115.9854" x="259.6133" y="1494.6875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9854" x="266.6133" y="1514.6826">AuthController</text></g><g class="participant participant-head" data-participant="AS"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="98.5537" x="602.9136" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="609.9136" y="69.9951">AuthService</text></g><g class="participant participant-tail" data-participant="AS"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="98.5537" x="602.9136" y="1494.6875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="609.9136" y="1514.6826">AuthService</text></g><g class="participant participant-head" data-participant="JS"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="86.8096" x="870.6831" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8096" x="877.6831" y="69.9951">JwtService</text></g><g class="participant participant-tail" data-participant="JS"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="86.8096" x="870.6831" y="1494.6875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8096" x="877.6831" y="1514.6826">JwtService</text></g><g class="participant participant-head" data-participant="UR"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="120.9824" x="967.4927" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9824" x="974.4927" y="69.9951">UserRepository</text></g><g class="participant participant-tail" data-participant="UR"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="120.9824" x="967.4927" y="1494.6875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9824" x="974.4927" y="1514.6826">UserRepository</text></g><g class="participant participant-head" data-participant="RTR"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="185.5889" x="1098.4751" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.5889" x="1105.4751" y="69.9951">RefreshTokenRepository</text></g><g class="participant participant-tail" data-participant="RTR"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="185.5889" x="1098.4751" y="1494.6875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.5889" x="1105.4751" y="1514.6826">RefreshTokenRepository</text></g><g class="participant participant-head" data-participant="DB"><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1758" x="1628.2427" y="77.9951">Postgres DB</text><path d="M1655.8306,29 C1655.8306,19 1673.8306,19 1673.8306,19 C1673.8306,19 1691.8306,19 1691.8306,29 L1691.8306,55 C1691.8306,65 1673.8306,65 1673.8306,65 C1673.8306,65 1655.8306,65 1655.8306,55 L1655.8306,29" fill="#222222" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1655.8306,29 C1655.8306,39 1673.8306,39 1673.8306,39 C1673.8306,39 1691.8306,39 1691.8306,29" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1758" x="1628.2427" y="1507.6826">Postgres DB</text><path d="M1655.8306,1520.9844 C1655.8306,1510.9844 1673.8306,1510.9844 1673.8306,1510.9844 C1673.8306,1510.9844 1691.8306,1510.9844 1691.8306,1520.9844 L1691.8306,1546.9844 C1691.8306,1556.9844 1673.8306,1556.9844 1673.8306,1556.9844 C1673.8306,1556.9844 1655.8306,1556.9844 1655.8306,1546.9844 L1655.8306,1520.9844" fill="#222222" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1655.8306,1520.9844 C1655.8306,1530.9844 1673.8306,1530.9844 1673.8306,1530.9844 C1673.8306,1530.9844 1691.8306,1530.9844 1691.8306,1520.9844" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/></g><g class="message" data-participant-1="FE" data-participant-2="AC"><polygon fill="#E7E7E7" points="305.606,108.4297,315.606,112.4297,305.606,116.4297,309.606,112.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="74.5547" x2="311.606" y1="112.4297" y2="112.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.0513" x="81.5547" y="107.3638">POST /auth/refresh(refreshToken)</text></g><g class="message" data-participant-1="AC" data-participant-2="AS"><polygon fill="#E7E7E7" points="640.1904,137.5625,650.1904,141.5625,640.1904,145.5625,644.1904,141.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="317.606" x2="646.1904" y1="141.5625" y2="141.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.3525" x="324.606" y="136.4966">refresh(refreshToken)</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#E7E7E7" points="902.0879,166.6953,912.0879,170.6953,902.0879,174.6953,906.0879,170.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="908.0879" y1="170.6953" y2="170.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.8975" x="659.1904" y="165.6294">validateRefreshToken(refreshToken)</text></g><path d="M10,185.6953 L74.4429,185.6953 L74.4429,192.8281 L64.4429,202.8281 L10,202.8281 L10,185.6953" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="1292.9922" style="stroke:#FFFFFF;stroke-width:1.5;" width="1739.4185" x="10" y="185.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="198.7622">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90.9165" x="89.4429" y="197.9058">[token invalid]</text><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,219.9609,653.1904,223.9609,663.1904,227.9609,659.1904,223.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="223.9609" y2="223.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30.9258" x="669.1904" y="218.895">false</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#E7E7E7" points="328.606,249.0938,318.606,253.0938,328.606,257.0938,324.606,253.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="253.0938" y2="253.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="248.0278">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#E7E7E7" points="85.5547,278.2266,75.5547,282.2266,85.5547,286.2266,81.5547,282.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="282.2266" y2="282.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="277.1606">401 Unauthorized</text></g><line style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1749.4185" y1="291.2266" y2="291.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.3149" x="15" y="301.437">[token valid]</text><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,322.1641,653.1904,326.1641,663.1904,330.1641,659.1904,326.1641" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="326.1641" y2="326.1641"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.6792" x="669.1904" y="321.0981">true</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#E7E7E7" points="902.0879,351.2969,912.0879,355.2969,902.0879,359.2969,906.0879,355.2969" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="908.0879" y1="355.2969" y2="355.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.2417" x="659.1904" y="350.231">getUserIdFromToken(refreshToken)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,380.4297,653.1904,384.4297,663.1904,388.4297,659.1904,384.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="384.4297" y2="384.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.4409" x="669.1904" y="379.3638">userId</text></g><g class="message" data-participant-1="AS" data-participant-2="UR"><polygon fill="#E7E7E7" points="1015.9839,409.5625,1025.9839,413.5625,1015.9839,417.5625,1019.9839,413.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="1021.9839" y1="413.5625" y2="413.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.9619" x="659.1904" y="408.4966">findById(userId)</text></g><g class="message" data-participant-1="UR" data-participant-2="DB"><polygon fill="#E7E7E7" points="1661.8306,438.6953,1671.8306,442.6953,1661.8306,446.6953,1665.8306,442.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1027.9839" x2="1667.8306" y1="442.6953" y2="442.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.9351" x="1034.9839" y="437.6294">SELECT * FROM users WHERE id=?</text></g><path d="M20,457.6953 L84.4429,457.6953 L84.4429,464.8281 L74.4429,474.8281 L20,474.8281 L20,457.6953" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="1013.9922" style="stroke:#FFFFFF;stroke-width:1.5;" width="1719.4185" x="20" y="457.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="470.7622">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101.5029" x="99.4429" y="469.9058">[user not found]</text><g class="message" data-participant-1="DB" data-participant-2="UR"><polygon fill="#E7E7E7" points="1038.9839,491.9609,1028.9839,495.9609,1038.9839,499.9609,1034.9839,495.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1032.9839" x2="1672.8306" y1="495.9609" y2="495.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="1044.9839" y="490.895">null</text></g><g class="message" data-participant-1="UR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,521.0938,653.1904,525.0938,663.1904,529.0938,659.1904,525.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1026.9839" y1="525.0938" y2="525.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="669.1904" y="520.0278">null</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#E7E7E7" points="328.606,550.2266,318.606,554.2266,328.606,558.2266,324.606,554.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="554.2266" y2="554.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="549.1606">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#E7E7E7" points="85.5547,579.3594,75.5547,583.3594,85.5547,587.3594,81.5547,583.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="583.3594" y2="583.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="578.2935">401 Unauthorized</text></g><line style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="1739.4185" y1="592.3594" y2="592.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.0269" x="25" y="602.5698">[user found]</text><g class="message" data-participant-1="DB" data-participant-2="UR"><polygon fill="#E7E7E7" points="1038.9839,623.2969,1028.9839,627.2969,1038.9839,631.2969,1034.9839,627.2969" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1032.9839" x2="1672.8306" y1="627.2969" y2="627.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.355" x="1044.9839" y="622.231">user</text></g><g class="message" data-participant-1="UR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,652.4297,653.1904,656.4297,663.1904,660.4297,659.1904,656.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1026.9839" y1="656.4297" y2="656.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.355" x="669.1904" y="651.3638">user</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#E7E7E7" points="902.0879,681.5625,912.0879,685.5625,902.0879,689.5625,906.0879,685.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="908.0879" y1="685.5625" y2="685.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9561" x="659.1904" y="680.4966">hashToken(refreshToken)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,710.6953,653.1904,714.6953,663.1904,718.6953,659.1904,714.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="714.6953" y2="714.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="669.1904" y="709.6294">hashedRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1179.2695,739.8281,1189.2695,743.8281,1179.2695,747.8281,1183.2695,743.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="743.8281" y2="743.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396.9063" x="659.1904" y="738.7622">findByUserIdAndHashedToken(user.id, hashedRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#E7E7E7" points="1661.8306,768.9609,1671.8306,772.9609,1661.8306,776.9609,1665.8306,772.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="772.9609" y2="772.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="458.561" x="1198.2695" y="767.895">SELECT * FROM refresh_tokens WHERE userId=? AND hashedToken=?</text></g><path d="M30,787.9609 L94.4429,787.9609 L94.4429,795.0938 L84.4429,805.0938 L30,805.0938 L30,787.9609" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="676.7266" style="stroke:#FFFFFF;stroke-width:1.5;" width="1699.4185" x="30" y="787.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="801.0278">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.4258" x="109.4429" y="800.1714">[refresh token not found]</text><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1202.2695,822.2266,1192.2695,826.2266,1202.2695,830.2266,1198.2695,826.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="826.2266" y2="826.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="1208.2695" y="821.1606">null</text></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,851.3594,653.1904,855.3594,663.1904,859.3594,659.1904,855.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="855.3594" y2="855.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="669.1904" y="850.2935">null</text></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#E7E7E7" points="328.606,880.4922,318.606,884.4922,328.606,888.4922,324.606,884.4922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="884.4922" y2="884.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0503" x="334.606" y="879.4263">throw ResponseStatusException</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#E7E7E7" points="85.5547,909.625,75.5547,913.625,85.5547,917.625,81.5547,913.625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="913.625" y2="913.625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2256" x="91.5547" y="908.5591">401 Unauthorized</text></g><line style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="1729.4185" y1="922.625" y2="922.625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.9497" x="35" y="932.8354">[refresh token found]</text><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1202.2695,953.5625,1192.2695,957.5625,1202.2695,961.5625,1198.2695,957.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="957.5625" y2="957.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="1208.2695" y="952.4966">hashedRefreshToken</text></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,982.6953,653.1904,986.6953,663.1904,990.6953,659.1904,986.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="986.6953" y2="986.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.0903" x="669.1904" y="981.6294">hashedRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1179.2695,1011.8281,1189.2695,1015.8281,1179.2695,1019.8281,1183.2695,1015.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="1015.8281" y2="1015.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="413.1816" x="659.1904" y="1010.7622">deleteByUserIdAndHashedToken(user.id, hashedRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#E7E7E7" points="1661.8306,1040.9609,1671.8306,1044.9609,1661.8306,1048.9609,1665.8306,1044.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="1044.9609" y2="1044.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="448.8237" x="1198.2695" y="1039.895">DELETE FROM refresh_tokens WHERE userId=? AND hashedToken=?</text></g><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1202.2695,1054.9609,1192.2695,1058.9609,1202.2695,1062.9609,1198.2695,1058.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="1058.9609" y2="1058.9609"/></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,1068.9609,653.1904,1072.9609,663.1904,1076.9609,659.1904,1072.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="1072.9609" y2="1072.9609"/></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#E7E7E7" points="902.0879,1098.0938,912.0879,1102.0938,902.0879,1106.0938,906.0879,1102.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="908.0879" y1="1102.0938" y2="1102.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.8701" x="659.1904" y="1097.0278">generateAccessToken(userId)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,1127.2266,653.1904,1131.2266,663.1904,1135.2266,659.1904,1131.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="1131.2266" y2="1131.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2617" x="669.1904" y="1126.1606">newAccessToken</text></g><g class="message" data-participant-1="AS" data-participant-2="JS"><polygon fill="#E7E7E7" points="902.0879,1156.3594,912.0879,1160.3594,902.0879,1164.3594,906.0879,1160.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="908.0879" y1="1160.3594" y2="1160.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.1006" x="659.1904" y="1155.2935">generateRefreshToken(userId)</text></g><g class="message" data-participant-1="JS" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,1185.4922,653.1904,1189.4922,663.1904,1193.4922,659.1904,1189.4922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="913.0879" y1="1189.4922" y2="1189.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.4922" x="669.1904" y="1184.4263">newRefreshToken</text></g><g class="message" data-participant-1="AS" data-participant-2="AS"><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="694.1904" y1="1218.625" y2="1218.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="694.1904" x2="694.1904" y1="1218.625" y2="1231.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="653.1904" x2="694.1904" y1="1231.625" y2="1231.625"/><polygon fill="#E7E7E7" points="663.1904,1227.625,653.1904,1231.625,663.1904,1235.625,659.1904,1231.625" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.5137" x="659.1904" y="1213.5591">hashToken(newRefreshToken)</text></g><g class="message" data-participant-1="AS" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1179.2695,1256.7578,1189.2695,1260.7578,1179.2695,1264.7578,1183.2695,1260.7578" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="652.1904" x2="1185.2695" y1="1260.7578" y2="1260.7578"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.6353" x="659.1904" y="1255.6919">save(user.id, hashedNewRefreshToken)</text></g><g class="message" data-participant-1="RTR" data-participant-2="DB"><polygon fill="#E7E7E7" points="1661.8306,1285.8906,1671.8306,1289.8906,1661.8306,1293.8906,1665.8306,1289.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1191.2695" x2="1667.8306" y1="1289.8906" y2="1289.8906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.8989" x="1198.2695" y="1284.8247">INSERT INTO refresh_tokens(...)</text></g><g class="message" data-participant-1="DB" data-participant-2="RTR"><polygon fill="#E7E7E7" points="1202.2695,1299.8906,1192.2695,1303.8906,1202.2695,1307.8906,1198.2695,1303.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="1196.2695" x2="1672.8306" y1="1303.8906" y2="1303.8906"/></g><g class="message" data-participant-1="RTR" data-participant-2="AS"><polygon fill="#E7E7E7" points="663.1904,1313.8906,653.1904,1317.8906,663.1904,1321.8906,659.1904,1317.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="657.1904" x2="1190.2695" y1="1317.8906" y2="1317.8906"/></g><g class="message" data-participant-1="AS" data-participant-2="AC"><polygon fill="#E7E7E7" points="328.606,1343.0234,318.606,1347.0234,328.606,1351.0234,324.606,1347.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="322.606" x2="651.1904" y1="1347.0234" y2="1347.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310.5845" x="334.606" y="1341.9575">TokenPair(newAccessToken, newRefreshToken)</text></g><g class="message" data-participant-1="AC" data-participant-2="FE"><polygon fill="#E7E7E7" points="85.5547,1372.1563,75.5547,1376.1563,85.5547,1380.1563,81.5547,1376.1563" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="79.5547" x2="316.606" y1="1376.1563" y2="1376.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="91.5547" y="1371.0903">200 OK</text></g><path d="M79,1389.1563 L79,1459.1563 L311,1459.1563 L311,1399.1563 L301,1389.1563 L79,1389.1563" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M301,1389.1563 L301,1399.1563 L311,1399.1563 L301,1389.1563" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="85" y="1406.2231">{</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.1187" x="93.2646" y="1421.356">&quot;accessToken&quot;: &quot;eyJhbGciOi...&quot;,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.4556" x="93.2646" y="1436.4888">&quot;refreshToken&quot;: &quot;eyJhbGciOi...&quot;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="85" y="1451.6216">}</text></g></svg></div></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../../assets/mkdocs_puml/interaction.js"></script>
      
    
  </body>
</html>